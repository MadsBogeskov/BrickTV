//
//  Catalog.swift
//  BrickTV
//
//  Created by Mads Bøgeskov on 19/10/15.
//  Copyright © 2015 LEGO. All rights reserved.
//

import Foundation

class Catalog
{
    func themes(completionHandler: ([Theme] -> ()))
    {
        let themeIds = ["E538AAB8-9193-445C-8F1F-3BC0DB8D39EB", "60F0CE73-FFB1-4F26-AA2A-1AD9A5378A0B", "{B05C9D06-FB83-42E4-A3C8-3F3DFCCD4D10}", "{2E9DDC10-6450-4F69-B757-ADDA9FA9A58F}", "{E2899F48-618A-4C00-9C19-57C29C0301D3}", "{48C07DFA-454B-4D24-82BE-599B1F67C4DC}", "{FC09D1D6-E733-40CB-9964-19F6BE29E37D}", "{46CA194D-B003-4011-8E82-904A77CB06E6}", "{E23E28E5-FB2A-400B-A78C-4AC2265167B2}", "{EC7A2A82-E45E-4688-8EE1-C48A0D4A05D8}", "{D14C8B96-FB4D-4B73-8396-7B8547753A8A}", "{172CC498-87A8-45B2-8104-F6C038176E75}", "{97233495-C959-4835-BAEC-6AF8610CBBD1}", "{826E5F94-BBCC-4F78-85F6-40668D94CFED}", "{DEB1FB4F-7B85-4A90-AE5B-F395F6214CD9}", "{E5BB6201-A5F8-44C2-A188-256D55628FD0}", "{4FAEF2A4-3085-4242-9BC9-3D35E77422F8}", "{E758CC46-77A8-4701-81D8-28A5C32C365F}", "{D38983AB-1BF7-451F-B217-8C71DBCD7D10}", "{ED24ACEA-E702-4264-B34C-2E478EB314B3}", "{94AE5018-7F7B-47D7-BDD7-0167FD38AAA2}", "{109504AB-3E76-4C07-89E3-849C7A557571}", "{71F1A637-649F-46DC-BAA0-2E2E24DE764A}", "{03D091FB-53EF-4D2F-91D6-6E8F7BC609E0}", "{CB7460F4-1E2D-4127-8267-4214D5481962}", "{CFF68113-B470-4C17-B104-0AB8F31641D1}", "{1DF51C08-C6A2-47CC-A97D-DD7B23D325F9}", "{F3F6C586-F405-426D-AB36-8B57FA47AEDE}", "{415888A4-9662-4ADC-B0CB-BE8E0B367C5D}", "{F44731D5-E369-49A3-A07A-7923C0CADEFC}", "{AE537D16-848C-47D1-9C28-5A57AEA1D87B}", "{CA67F2B9-CE74-45BD-A96C-AD11DA536115}", "{99A2946B-298B-48B0-92D5-0C5B1B065729}", "{FFBCE486-D064-4CD7-B3E0-F8229AC59D4B}", "{8E22E1F0-A1A7-4E7B-A535-51DA35B8388B}", "{32349C76-DE27-41E2-8EC9-18C5E46AD273}", "{4EBE3835-0E24-46CD-A379-84B24F368B3E}"];
        
        let r = themeIds.map {
            $0.stringByTrimmingCharactersInSet(NSCharacterSet(charactersInString: "{}"))
            }.map { NSMutableURLRequest(URL: createURL("theme", resourceId: $0)) }
        
        doLotsOfRequests(r, createObject: { (dic) -> Theme in
            Theme(json: dic)
            }) { (themes) -> () in
                completionHandler(themes)
        }
    }
}

